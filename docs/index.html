<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />

		<meta name="viewport" content="width=device-width" />

		<title>Echo - RSS Cross Poster</title>

		<link rel="stylesheet" href="water.css">
		<link rel="stylesheet" href="styles.css">

        <meta property="og:title" content="Echo: RSS Cross Poster" />
        <meta name="description" content="Echo is a node script to post new items from an RSS feed to various services including Micro.blog and Mastodon" />
        <meta property="og:description" content="Echo is a node script to post new items from an RSS feed to various services including Micro.blog and Mastodon" />
        <meta property="og:type" content="article" />
        <meta property="og:url" content="https://echo.rknight.me" />
        <meta property="og:image" content="https://raw.githubusercontent.com/rknightuk/echo/main/screenshot.png">

        <script src="https://cdn.usefathom.com/script.js" data-site="JOOCZOBO" defer></script>
	</head>
	<body>
        <svg width="0" height="0" style="display: none;">
            <symbol viewBox="0 0 385 385" xmlns="http://www.w3.org/2000/svg" id="newlogo">
                <g id="Group">
                    <path id="logo-rect-partial" stroke="currentColor" opacity="0.6" fill="none" stroke-width="13.6875"
                        d="M 68.179688 64 L 54 64 C 41.85405 64 35.781067 64 31.227577 66.550079 C 28.009415 68.352325 25.352333 71.00943 23.550079 74.22757 C 21 78.781067 21 84.854034 21 97 L 21 331 C 21 343.145935 21 349.218933 23.550079 353.77243 C 25.352333 356.99057 28.009415 359.647675 31.227577 361.449921 C 35.781067 364 41.85405 364 54 364 L 288 364 C 300.145966 364 306.218933 364 310.77243 361.449921 C 313.990601 359.647675 316.647675 356.99057 318.449921 353.77243 C 321 349.218933 321 343.145935 321 331 L 321 314.539063 M 321 314.539063 L 321 314" />
                    <path id="logo-rect-full" stroke="currentColor" fill="none" stroke-width="13.6875"
                        d="M 71 281 C 71 293.145935 71 299.218933 73.550079 303.77243 C 75.352333 306.99057 78.009422 309.647675 81.227577 311.449921 C 85.781067 314 91.85405 314 104 314 L 338 314 C 350.145966 314 356.218933 314 360.77243 311.449921 C 363.990601 309.647675 366.647675 306.99057 368.449921 303.77243 C 371 299.218933 371 293.145935 371 281 L 371 47 C 371 34.854034 371 28.781067 368.449921 24.22757 C 366.647675 21.009399 363.99057 18.352325 360.77243 16.550079 C 356.218933 14 350.145966 14 338 14 L 104 14 C 91.85405 14 85.781067 14 81.227577 16.550079 C 78.009422 18.352325 75.352333 21.00943 73.550079 24.22757 C 71 28.781067 71 34.854034 71 47 Z" />
                    <path id="logo-bar-1" fill="#f26522" opacity="0.7"
                        d="M 123.476 142.563 H 123.476 A 10.86 10.86 0 0 1 134.336 153.423 V 174.714 A 10.86 10.86 0 0 1 123.476 185.574 H 123.476 A 10.86 10.86 0 0 1 112.616 174.714 V 153.423 A 10.86 10.86 0 0 1 123.476 142.563 Z">
                    </path>
                    <path id="logo-bar-2" fill="#f26522" opacity="0.8"
                        d="M 155.737 131.806 H 155.737 A 10.86 10.86 0 0 1 166.597 142.666 V 185.886 A 10.86 10.86 0 0 1 155.737 196.746 H 155.737 A 10.86 10.86 0 0 1 144.877 185.886 V 142.666 A 10.86 10.86 0 0 1 155.737 131.806 Z">
                    </path>
                    <path id="logo-bar-3" fill="#f26522" opacity="0.9"
                        d="M 187.999 99.581 H 187.999 A 10.86 10.86 0 0 1 198.859 110.441 V 217.875 A 10.86 10.86 0 0 1 187.999 228.735 H 187.999 A 10.86 10.86 0 0 1 177.139 217.875 V 110.441 A 10.86 10.86 0 0 1 187.999 99.581 Z">
                    </path>
                    <path id="logo-bar-4" fill="#f26522" opacity="1"
                        d="M 220.26 77.756 H 220.26 A 10.86 10.86 0 0 1 231.12 88.616 V 239.45 A 10.86 10.86 0 0 1 220.26 250.31 H 220.26 A 10.86 10.86 0 0 1 209.4 239.45 V 88.616 A 10.86 10.86 0 0 1 220.26 77.756 Z">
                    </path>
                    <path id="logo-bar-5" fill="#f26522" opacity="0.9"
                        d="M 252.521 121.491 H 252.521 A 10.86 10.86 0 0 1 263.381 132.351 V 196.563 A 10.86 10.86 0 0 1 252.521 207.423 H 252.521 A 10.86 10.86 0 0 1 241.661 196.563 V 132.351 A 10.86 10.86 0 0 1 252.521 121.491 Z">
                    </path>
                    <path id="logo-bar-6" fill="#f26522" opacity="0.8"
                        d="M 284.783 99.967 H 284.783 A 10.86 10.86 0 0 1 295.643 110.827 V 217.865 A 10.86 10.86 0 0 1 284.783 228.725 H 284.783 A 10.86 10.86 0 0 1 273.923 217.865 V 110.827 A 10.86 10.86 0 0 1 284.783 99.967 Z">
                    </path>
                    <path id="logo-bar-7" fill="#f26522" opacity="0.7"
                        d="M 317.044 131.494 H 317.044 A 10.86 10.86 0 0 1 327.904 142.354 V 185.574 A 10.86 10.86 0 0 1 317.044 196.434 H 317.044 A 10.86 10.86 0 0 1 306.184 185.574 V 142.354 A 10.86 10.86 0 0 1 317.044 131.494 Z">
                    </path>
                </g>
            </symbol>
            <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" id="code">
                <path
                    d="M234.8 511.7L196 500.4c-4.2-1.2-6.7-5.7-5.5-9.9L331.3 5.8c1.2-4.2 5.7-6.7 9.9-5.5L380 11.6c4.2 1.2 6.7 5.7 5.5 9.9L244.7 506.2c-1.2 4.3-5.6 6.7-9.9 5.5zm-83.2-121.1l27.2-29c3.1-3.3 2.8-8.5-.5-11.5L72.2 256l106.1-94.1c3.4-3 3.6-8.2.5-11.5l-27.2-29c-3-3.2-8.1-3.4-11.3-.4L2.5 250.2c-3.4 3.2-3.4 8.5 0 11.7L140.3 391c3.2 3 8.2 2.8 11.3-.4zm284.1.4l137.7-129.1c3.4-3.2 3.4-8.5 0-11.7L435.7 121c-3.2-3-8.3-2.9-11.3.4l-27.2 29c-3.1 3.3-2.8 8.5.5 11.5L503.8 256l-106.1 94.1c-3.4 3-3.6 8.2-.5 11.5l27.2 29c3.1 3.2 8.1 3.4 11.3.4z">
                </path>
            </symbol>
            <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" id="mastodon">
                <path
                    d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z">
                </path>
            </symbol>
            <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" id="microblog">
                <path
                    d="M399.36,362.23c29.49-34.69,47.1-78.34,47.1-125.79C446.46,123.49,346.86,32,224,32S1.54,123.49,1.54,236.44,101.14,440.87,224,440.87a239.28,239.28,0,0,0,79.44-13.44,7.18,7.18,0,0,1,8.12,2.56c18.58,25.09,47.61,42.74,79.89,49.92a4.42,4.42,0,0,0,5.22-3.43,4.37,4.37,0,0,0-.85-3.62,87,87,0,0,1,3.69-110.69ZM329.52,212.4l-57.3,43.49L293,324.75a6.5,6.5,0,0,1-9.94,7.22L224,290.92,164.94,332a6.51,6.51,0,0,1-9.95-7.22l20.79-68.86-57.3-43.49a6.5,6.5,0,0,1,3.8-11.68l71.88-1.51,23.66-67.92a6.5,6.5,0,0,1,12.28,0l23.66,67.92,71.88,1.51a6.5,6.5,0,0,1,3.88,11.68Z">
                </path>
            </symbol>
            <symbol version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                viewBox="0 0 24 24" id="sound">
                <title>sound</title>
                <desc>Created with Sketch.</desc>
                <defs></defs>
                <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <g id="Artboard-4" transform="translate(-268.000000, -863.000000)" fill="currentColor">
                        <g id="346" transform="translate(268.000000, 863.000000)">
                            <path
                                d="M2,11.0093689 C2,10.4519098 2.44386482,10 3,10 C3.55228475,10 4,10.4433532 4,11.0093689 L4,12.9906311 C4,13.5480902 3.55613518,14 3,14 C2.44771525,14 2,13.5566468 2,12.9906311 L2,11.0093689 Z M5,9.99077797 C5,9.44358641 5.44386482,9 6,9 C6.55228475,9 7,9.45097518 7,9.99077797 L7,14.009222 C7,14.5564136 6.55613518,15 6,15 C5.44771525,15 5,14.5490248 5,14.009222 L5,9.99077797 Z M8,7.00247329 C8,6.44882258 8.44386482,6 9,6 C9.55228475,6 10,6.45576096 10,7.00247329 L10,16.9975267 C10,17.5511774 9.55613518,18 9,18 C8.44771525,18 8,17.544239 8,16.9975267 L8,7.00247329 Z M11,5.00087166 C11,4.4481055 11.4438648,4 12,4 C12.5522847,4 13,4.44463086 13,5.00087166 L13,18.9991283 C13,19.5518945 12.5561352,20 12,20 C11.4477153,20 11,19.5553691 11,18.9991283 L11,5.00087166 Z M14,8.99703014 C14,8.4463856 14.4438648,8 15,8 C15.5522847,8 16,8.45303631 16,8.99703014 L16,15.0029699 C16,15.5536144 15.5561352,16 15,16 C14.4477153,16 14,15.5469637 14,15.0029699 L14,8.99703014 Z M17,7.00247329 C17,6.44882258 17.4438648,6 18,6 C18.5522847,6 19,6.45576096 19,7.00247329 L19,16.9975267 C19,17.5511774 18.5561352,18 18,18 C17.4477153,18 17,17.544239 17,16.9975267 L17,7.00247329 Z M20,9.99077797 C20,9.44358641 20.4438648,9 21,9 C21.5522847,9 22,9.45097518 22,9.99077797 L22,14.009222 C22,14.5564136 21.5561352,15 21,15 C20.4477153,15 20,14.5490248 20,14.009222 L20,9.99077797 Z"
                                id="Combined-Shape"></path>
                        </g>
                    </g>
                </g>
            </symbol>
            <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="omnivore">
                <path
                    d="M15.9 7.801c0 .507-.123 1.12-.248 1.656v.004l-.001.003a2.87 2.87 0 0 1-2.793 2.186h-.036c-1.625 0-2.649-1.334-2.649-2.828v-2.14l-1.21 1.794-.067.055a1.404 1.404 0 0 1-1.793 0l-.065-.053-1.248-1.82v4.414H4.6V6.268c0-.91 1.078-1.439 1.794-.802l.055.048 1.46 2.13a.21.21 0 0 0 .179 0l1.43-2.119.065-.054c.68-.567 1.78-.138 1.78.815v2.536c0 .971.619 1.638 1.46 1.638h.035c.78 0 1.45-.527 1.636-1.277.125-.534.216-1.026.216-1.378-.017-3.835-3.262-6.762-7.188-6.498-3.311.23-5.986 2.905-6.216 6.216A6.705 6.705 0 0 0 8 14.693v1.19a7.895 7.895 0 0 1-7.882-8.44C.39 3.536 3.536.39 7.44.118 12.017-.19 15.88 3.242 15.9 7.8z">
                </path>
            </symbol>
            <symbol role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="github">
                <path
                    d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" />
            </symbol>
            <symbol viewBox="0 0 156 321" xmlns="http://www.w3.org/2000/svg" id="linkace">
                <path fill="none" stroke="currentColor" stroke-width="14" stroke-linecap="round"
                    d="M 56.580002 228.884003 L 55.880001 109.276001 C 55.833832 103.437134 58.144863 97.826477 62.290001 93.713989 C 66.445114 89.583588 72.080444 87.287903 77.939003 87.338989 L 77.939003 87.338989 C 90.234001 87.472 100.133003 97.31601 100.266998 109.544006 L 101.005997 253.173996 C 101.182999 279.270996 83.668999 298.117004 61.889 298 C 40.109001 297.881989 24.203001 283.571991 24.145 253.714005 L 23.003 74.858002 C 22.855 60.55899 28.523001 46.773987 38.721001 36.634003 C 48.925491 26.490173 62.770214 20.860016 77.158005 21.002991 L 77.158005 21.002991 C 107.364998 21.278992 131.695007 45.473999 131.973007 75.514008 L 133 231.565994" />
            </symbol>
            <symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-10 -5 1034 1034" id="webmention">
                <path fill="currentColor" d="M857 216l-230 214h111l-85 368h-2l-120 -368h-144l-121 362h-2l-111 -476h-153l185 700h155l117 -363h2l118 363h153l157 -586h113z"></path>
            </symbol>
        </svg>

		<a href="https://github.com/rknightuk/echo" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

		<header>
			<h1>
                <svg class="icon">
                    <use xlink:href="#sound"></use>
                </svg> Echo <sup style="font-size: 0.5em;">classic</sup>
            </h1>
            <h2>RSS Cross Poster</h2>
			<p>by <a href="https://rknight.me">Robb Knight</a></p>
		</header>

        <div class="banner">
            <svg class="icon">
                <use xlink:href="#newlogo"></use>
            </svg>
            <div>
            <p>EchoFeed: A new, hosted version of Echo is now live <a href="https://echofeed.app">echofeed.app</a></p>
            </div>
        </div>

        <squirm-inal autoplay>
            <pre class="terminal-output">
                <div class="buttons">
                    <div class="circle red"></div>
                    <div class="circle yellow"></div>
                    <div class="circle green"></div>
                </div>
$ node index.js
⚙️ Fetching for status.lol
⭐ Created post on Micro.blog!
⭐ Created post on Mastodon!
⚙️ Fetching for Letterboxed
⭐ Created post on Micro.blog!
⚙️ Fetching for Nexus
❎ No new items found for Nexus
            </pre>
        </squirm-inal>
        <script type="module" src="squirminal.js"></script>

        <h2>What is Echo?</h2>

        <p>Echo is a node script to post new items from an RSS feed to various services including Micro.blog and Mastodon. Checkout <a href="https://github.com/rknightuk/echo">the readme on GitHub</a> for installation instructions. Use the forms below to generate your config.</p>

        <h2>Config Generator</h2>

        <form id="form-feed">
            <h3>RSS feeds to cross-post</h3>
            <div class="form-row">
                <label class="form-label">Feed URL:</label>
                <input type="text" id="feed" placeholder="https://example.com/feed">
            </div>
            <div class="form-row">
                <div class="form-label">JSON Feed?</div>
                <div>
                    <input type="checkbox" name="feed_is_json" id="feed_is_json"><label for="feed_is_json"></label><br>
                </div>
            </div>
            <div class="form-row">
                <label class="form-label">Site Name:</label>
                <input type="text" id="name" placeholder="example.com">
            </div>
            <div class="form-row">
                <label class="form-label">Categories:</label>
                <input type="text" id="categories" placeholder="Movies, TV">
            </div>
            <div class="form-row">
                <div class="form-label">Send to:</div>
                <div>
                    <input type="checkbox" name="feed_microblog" id="feed_microblog"><label for="feed_microblog">Micro.blog</label><br>
                    <input type="checkbox" name="feed_mastodon" id="feed_mastodon"><label for="feed_mastodon">Mastodon</label><br>
                    <input type="checkbox" name="feed_webhook" id="feed_webhook"><label for="feed_webhook">Webhook</label><br>
                    <input type="checkbox" name="feed_omnivore" id="feed_omnivore"><label for="feed_omnivore">Omnivore</label><br>
                    <input type="checkbox" name="feed_github" id="feed_github"><label for="feed_github">GitHub</label><br>
                    <input type="checkbox" name="feed_linkace" id="feed_linkace"><label for="feed_linkace">LinkAce</label><br>
                    <input type="checkbox" name="feed_webmention" id="feed_webmention"><label for="feed_webmention">Webmention</label>
                </div>
            </div>

            <div class="form-row">
                <div class="form-label"></div>
                <button type="submit">Add Feed</button>
            </div>
        </form>

        <h3>Services to send to</h3>
        <div class="services">
            <div class="service service-mb active" data-id="mb">
                <svg class="icon">
                    <use xlink:href="#microblog"></use>
                </svg> Micro.blog
            </div>
            <div class="service service-mastodon" data-id="masto">
                <svg class="icon">
                    <use xlink:href="#mastodon"></use>
                </svg> Mastodon
            </div>
            <div class="service service-webhook" data-id="hook">
                <svg class="icon">
                    <use xlink:href="#code"></use>
                </svg> Webhook
            </div>
            <div class="service service-omnivore" data-id="omnivore">
                <svg class="icon">
                    <use xlink:href="#omnivore"></use>
                </svg> Omnivore
            </div>
            <div class="service service-github" data-id="github">
                <svg class="icon">
                    <use xlink:href="#github"></use>
                </svg> GitHub
            </div>
            <div class="service service-linkace" data-id="linkace">
                <svg class="icon">
                    <use xlink:href="#linkace"></use>
                </svg> LinkAce
            </div>
            <div class="service service-webmention" data-id="webmention">
                <svg class="icon">
                    <use xlink:href="#webmention"></use>
                </svg> Webmention
            </div>
        </div>

        <form id="form-services" class="form-services">
            <!-- Micro.blog -->
            <div class="form-row form-row-mb">
                <label class="form-label">Micro.blog site:</label>
                <input type="text" id="mb_site" placeholder="https://coolsite.micro.blog">
            </div>
            <div class="form-row form-row-mb">
                <label class="form-label">API Key:</label>
                <input type="text" id="mb_key" placeholder="hunter2">
            </div>

            <!-- Mastodon -->
            <div class="form-row form-row-masto">
                <label class="form-label">Instance URL:</label>
                <input type="text" id="mast_site" placeholder="https://social.lol">
            </div>
            <div class="form-row form-row-masto">
                <label class="form-label">Access Token:</label>
                <input type="text" id="mast_key" placeholder="hunter2">
            </div>
            <div class="form-row form-row-masto">
                <div class="form-label">Visibility:</div>
                <div>
                    <input type="radio" name="mast_vis" id="public" value="public" checked><label for="public">public</label><br>
                    <input type="radio" name="mast_vis" id="unlisted" value="unlisted"><label for="unlisted">unlisted</label><br>
                    <input type="radio" name="mast_vis" id="private" value="private"><label for="private">private</label><br>
                    <input type="radio" name="mast_vis" id="direct" value="direct"><label for="direct">direct</label>
                </div>
            </div>
            <div class="form-row form-row-masto">
                <div class="form-label">Sensitive:</div>
                <div>
                    <input type="checkbox" id="mast_sens">
                </div>
            </div>

            <!-- Webhook -->
            <div class="form-row form-row-hook">
                <label class="form-label">Endpoint:</label>
                <input type="text" id="hook_url" name="hook_url" placeholder="https://example.com/hooks/recieve">
            </div>

            <!-- Omnivore -->
            <div class="form-row form-row-omnivore">
                <label class="form-label">API Key:</label>
                <input type="text" id="omnivore_key" name="omnivore_key" placeholder="12345">
            </div>

            <!-- Github -->
            <div class="form-row form-row-github">
                <label class="form-label">Repository:</label>
                <input type="text" id="github_repo" name="github_repo" placeholder="rknightuk/echo">
            </div>
            <div class="form-row form-row-github">
                <label class="form-label">Branch:</label>
                <input type="text" id="github_branch" name="github_branch" placeholder="main">
            </div>
            <div class="form-row form-row-github">
                <label class="form-label">Token:</label>
                <input type="text" id="github_token" name="github_token" placeholder="12345">
            </div>
            <div class="form-row form-row-github">
                <label class="form-label">Name:</label>
                <input type="text" id="github_name" name="github_name" placeholder="Robb Knight">
            </div>
            <div class="form-row form-row-github">
                <label class="form-label">Email:</label>
                <input type="text" id="github_email" name="github_email" placeholder="robb@example.com">
            </div>

            <div class="form-row form-row-linkace">
                <label class="form-label">LinkAce Domain:</label>
                <input type="text" id="linkace_site" placeholder="https://linkace.example.com">
            </div>
            <div class="form-row form-row-linkace">
                <label class="form-label">API Key:</label>
                <input type="text" id="linkace_key" placeholder="hunter2">
            </div>

            <div class="form-row form-row-webmention">
                <label class="form-label"><em>No data required for sending webmentions</em></label>
            </div>

            <div class="form-row form-row-submit">
                <div class="form-label"></div>
                <button type="submit">Add Service</button>
            </div>
        </form>

        <h3>Your Config</h3>

        <button onclick="copyConfig()">Copy to Clipboard</button>
        <div>
            <pre id="config_output"></pre>
        </div>

        <button onclick="reset()">Reset</button>


        <footer>
            <p>Made by <a href="http://rknight.me">Robb Knight</a> &bull; <a href="https://www.buymeacoffee.com/rknightuk">Buy me a Coffee</a> &bull; <a href="https://github.com/rknightuk/echo/blob/main/changelog.md">Changelog</a> &bull; Softies icons by <a href="https://robbiepearce.com/softies/">Robbie Pearce</a></p>
        </footer>

        <script src="tinytoast.js"></script>
        <style>
            .tinyToast {
                background-color: #b2f2bb;
                border: 2px solid #69db7c;
                color: black;
                padding: 10px 20px;
                font-size: 1em;
            }
        </style>
        <script>
            (function () {
                const configOutput = document.getElementById('config_output')
                renderConfig = () => {
                    configOutput.innerHTML = JSON
                        .stringify(window.echoConfig, null, 4)
                        .replaceAll('"presets.default"', 'presets.default')

                    if (localStorage) {
                        localStorage.setItem('echoConfig', JSON.stringify(window.echoConfig))
                    }
                }

                reset = () => {
                    window.echoConfig = {
                        services: {},
                        sites: [],
                    }
                    renderConfig()
                }

                window.echoConfig = {
                    services: {},
                    sites: [],
                }

                if (localStorage)
                {
                    const savedConfig = localStorage.getItem('echoConfig')
                    if (savedConfig)
                    {
                        window.echoConfig = JSON.parse(savedConfig)
                    }
                }

                renderConfig()

                copyConfig = () => {
                    navigator.clipboard.writeText(configOutput.innerText)
                    tinyToast.show(`Config copied to clipboard`).hide(2000)
                }

                renderConfig()

                Array.from(document.getElementsByClassName('service')).forEach(service => {
                    service.addEventListener('click', (e) => {
                        Array.from(document.getElementsByClassName('service')).forEach(s => {
                            s.className = s.className.replace('active', '')
                        })
                        if (e.currentTarget.className.includes('active')) {
                            e.currentTarget.className = e.currentTarget.className.replace('active', '')
                        } else {
                            e.currentTarget.className += ' active'
                        }
                    })
                })

                const feedForm = document.getElementById('form-feed')
                feedForm.addEventListener('submit', (e) => {
                    e.preventDefault()
                    const inputs = e.currentTarget.elements
                    const feed = {
                        name: inputs['name'].value.toLowerCase().replaceAll(' ', '_'),
                        feed: inputs['feed'].value,
                        json: inputs['feed_is_json'].checked,
                        categories: inputs['categories'].value ? inputs['categories'].value.split(',') : [],
                        services: [
                            inputs['feed_microblog'].checked ? 'mb' : false,
                            inputs['feed_mastodon'].checked ? 'masto' : false,
                            inputs['feed_webhook'].checked ? 'hook' : false,
                            inputs['feed_omnivore'].checked ? 'omnivore' : false,
                            inputs['feed_github'].checked ? 'github' : false,
                            inputs['feed_linkace'].checked ? 'linkace' : false,
                            inputs['feed_webmention'].checked ? 'webmention' : false,
                        ].filter(s => s),
                        transform: 'presets.default',
                    }
                    const errors = []
                    if (!feed.name) errors.push('name')
                    if (!feed.feed) errors.push('feed URL')
                    if (!feed.services.length) errors.push('at least one service')

                    if (errors.length)
                    {
                        tinyToast.show(`${errors.join(', ')} is required`).hide(2000)
                        return
                    }
                    feedForm.reset()

                    window.echoConfig.sites.push(feed)
                    tinyToast.show('Site added to config!').hide(1500)
                    renderConfig()
                })

                const servicesForm = document.getElementById('form-services')
                servicesForm.addEventListener('submit', (e) => {
                    e.preventDefault()
                    const inputs = e.currentTarget.elements
                    const service = document.querySelector('.service.active').dataset.id
                    let serviceConfig = {}
                    const errors = []

                    if (service === 'mb')
                    {
                        serviceConfig = {
                            siteUrl: inputs['mb_site'].value,
                            apiKey: inputs['mb_key'].value,
                        }
                        if (!serviceConfig.siteUrl) errors.push('site')
                        if (!serviceConfig.apiKey) errors.push('api key')
                    } else if (service === 'masto')
                    {
                        serviceConfig = {
                            instance: inputs['mast_site'].value,
                            accessToken: inputs['mast_key'].value,
                            visibility: document.querySelector('input[name="mast_vis"]:checked').value,
                            sensitive: inputs['mast_sens'].checked,
                        }
                        if (!serviceConfig.instance) errors.push('instance url')
                        if (!serviceConfig.accessToken) errors.push('access token')
                    } else if (service === 'omnivore') {
                        serviceConfig = {
                            apiKey: inputs['omnivore_key'].value,
                        }
                        if (!serviceConfig.apiKey) errors.push('api key')
                    } else if (service === 'github') {
                        serviceConfig = {
                            repo: inputs['github_repo'].value,
                            token: inputs['github_token'].value,
                            branch: inputs['github_branch'].value,
                            committer: {
                                name: inputs['github_name'].value,
                                email: inputs['github_email'].value,
                            }
                        }
                        if (!serviceConfig.token) errors.push('token')
                        if (!serviceConfig.repo) errors.push('repository')
                        if (!serviceConfig.branch) errors.push('branch')
                        if (!serviceConfig.committer.name) errors.push('name')
                        if (!serviceConfig.committer.email) errors.push('email')
                    } else if (service === 'linkace') {
                        serviceConfig = {
                            domain: inputs['linkace_domain'].value,
                            apiKey: inputs['linkace_key'].value,
                        }
                        if (!serviceConfig.domain) errors.push('domain')
                        if (!serviceConfig.apiKey) errors.push('api key')
                    } else if (service === 'webmention') {
                        serviceConfig = {}
                    } else {
                        serviceConfig = {
                            url: inputs['hook_url'].value,
                        }
                        if (!serviceConfig.url) errors.push('url')
                    }

                    if (errors.length) {
                        tinyToast.show(`${errors.join(', ')} is required`).hide(2000)
                        return
                    }

                    servicesForm.reset()

                    window.echoConfig.services[service] = serviceConfig
                    tinyToast.show('Service added to config!').hide(1500)
                    renderConfig()
                })
            })();
        </script>
	</body>
</html>
